<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title data-translate="schedule.title">Schedule — Natafit</title>
  <meta name="description" content="Current Natafit training schedule. Choose a convenient time and sign up right now!">
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <header class="container header">
    <a href="index.html" class="logo"><img src="assets/logo.svg" alt="Natafit logo"/></a>
    <button class="hamburger" id="hamburger" aria-label="Open menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <nav class="nav" id="nav">
      <a href="index.html" data-translate="nav.home">Home</a>
      <a href="services.html" data-translate="nav.services">Services</a>
      <a href="schedule.html" data-translate="nav.schedule">Schedule</a>
      <a href="contact.html" data-translate="nav.contacts">Contact</a>
      <div class="controls">
        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
          <span class="theme-toggle-text" data-translate="theme.dark">Dark</span>
        </button>
        <select id="lang-select" class="lang-select" aria-label="Select language">
          <option value="en">EN</option>
          <option value="de">DE</option>
          <option value="ru">RU</option>
        </select>
      </div>
    </nav>
  </header>
  <main class="container">
    <section class="section">
      <h1 data-translate="schedule.pageTitle">Расписание тренировок</h1>
      <p class="small" data-translate="schedule.description">Выберите удобное время и свяжитесь со мной для записи</p>
      
      <!-- Skeleton Loading -->
      <div id="skeletonLoading" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin-top:32px">
        <div class="skeleton skeleton-card">
          <div class="skeleton skeleton-title"></div>
          <div class="skeleton skeleton-text"></div>
          <div class="skeleton skeleton-text"></div>
          <div class="skeleton skeleton-text" style="width:80%"></div>
        </div>
        <div class="skeleton skeleton-card">
          <div class="skeleton skeleton-title"></div>
          <div class="skeleton skeleton-text"></div>
          <div class="skeleton skeleton-text"></div>
          <div class="skeleton skeleton-text" style="width:80%"></div>
        </div>
        <div class="skeleton skeleton-card">
          <div class="skeleton skeleton-title"></div>
          <div class="skeleton skeleton-text"></div>
          <div class="skeleton skeleton-text"></div>
          <div class="skeleton skeleton-text" style="width:80%"></div>
        </div>
      </div>
      
      <!-- Actual Schedule Grid -->
      <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin-top:32px" id="scheduleGrid" class="loading-hidden">
        <!-- Расписание загрузится автоматически -->
      </div>
    </section>
  </main>

  <footer class="container footer">
    <div class="footer-content">
      <div class="footer-left">
        <div data-translate="footer.copyright">&copy; Natafit — все права защищены</div>
        <div class="small">Демо версия</div>
        <div class="small">
          <a href="impressum.html" style="color: var(--accent1); text-decoration: none;">Impressum</a> | 
          <a href="datenschutz.html" style="color: var(--accent1); text-decoration: none;">Datenschutz</a>
        </div>
      </div>
    </div>
  </footer>

  <script src="js/translations.js?v=2"></script>
  <script src="js/theme.js"></script>
  <script>
    // Простая загрузка расписания
    function loadSchedule() {
      const schedule = JSON.parse(localStorage.getItem('schedule')) || { weeks: [] };
      const grid = document.getElementById('scheduleGrid');
      const skeleton = document.getElementById('skeletonLoading');
      
      // Simulate loading delay for skeleton effect
      setTimeout(() => {
        skeleton.style.display = 'none';
        grid.classList.remove('loading-hidden');
        
        if (schedule.weeks.length === 0 || !schedule.weeks[0].days.some(d => d.slots.length > 0)) {
          const currentLang = localStorage.getItem('lang') || 'ru';
          const emptyMessage = translations[currentLang].schedule.emptyMessage;
          grid.innerHTML = `
            <div style="grid-column:1/-1;text-align:center;padding:40px;background:var(--card);border-radius:var(--radius)">
              <p style="color:var(--muted);font-size:18px">${emptyMessage}</p>
            </div>
          `;
          return;
        }

        const week = schedule.weeks[0];
        
        week.days.forEach(day => {
          if (day.slots.length === 0) return;

          const dayCard = document.createElement('div');
          dayCard.style.cssText = 'background:var(--card);border-radius:var(--radius);padding:24px';
          
          const currentLang = localStorage.getItem('lang') || 'ru';
          const bookedText = translations[currentLang].schedule.booked;
          const availableText = translations[currentLang].schedule.available;
          
          dayCard.innerHTML = `
            <h3 style="color:var(--accent1);margin-bottom:20px;font-size:20px">${day.name}</h3>
            ${day.slots.map(slot => {
              const isBooked = slot.clientName && slot.clientName.trim() !== '';
              return `
                <div style="border:2px solid ${isBooked ? 'var(--muted)' : 'var(--accent2)'};border-radius:var(--radius);padding:16px;margin-bottom:12px;${isBooked ? 'opacity:0.6' : ''}">
                  <div style="display:flex;align-items:center;justify-content:space-between">
                    <div>
                      <div style="font-size:20px;font-weight:bold;color:var(--text)">${slot.time}</div>
                      <div style="font-size:14px;color:var(--muted);margin-top:4px">
                        ${isBooked ? '❌ ' + bookedText : '✅ ' + availableText}
                      </div>
                    </div>
                  </div>
                </div>
              `;
            }).join('')}
          `;
          
          grid.appendChild(dayCard);
        });
      }, 800); // 800ms loading simulation
    }

    loadSchedule();
  </script>
  <script src="js/scroll-progress.js"></script>
</body>
</html>